{"version":3,"sources":["components/hooks/useCharacterBonus.tsx","components/hooks/useCharactersMetadata.tsx","components/hooks/useFragmentsMetadata.tsx","components/hooks/useStagesMetadata.tsx","components/SiteAppBar.tsx","context/createCtx.tsx","context/filterContext.tsx","context/metadataContext.tsx","filters/timeFilters.tsx","filters/filterColours.tsx","filters/storyFilters.tsx","filters/index.tsx","components/hooks/useFilteredData.tsx","components/hooks/useFilters.tsx","components/hooks/useLocalStorage.tsx","components/hooks/useRoster.tsx","components/hooks/useStageGroupedData.tsx","components/TableFilterSection.tsx","components/TableToolbar.tsx","pages/autoplay/CharacterTextLabel.tsx","pages/autoplay/leadCalculator.ts","pages/autoplay/LeaderTable.tsx","pages/autoplay/CharacterSelector.tsx","pages/autoplay/TeamSelector.tsx","pages/autoplay/CharacterAvatar.tsx","pages/autoplay/LeaderTableConcise.tsx","pages/autoplay/TeamSelectorBar.tsx","pages/autoplay/AutoplayPage.tsx","pages/manage/RosterManagement.tsx","pages/manage/ManagePage.tsx","components/FilterSection.tsx","components/AreaBumpChart.tsx","components/BarChart.tsx","components/hooks/useRankTableData.tsx","components/hooks/useAreaBumpData.tsx","components/hooks/useBarChartData.tsx","components/GraphCard.tsx","components/RankTable.tsx","components/RankTableCard.tsx","pages/stats/StatsPage.tsx","pages/HomePage.tsx","filters/fragmentFilters.tsx","theme.js","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useCharacterBonus","useQuery","a","fetch","res","json","useCharactersMetadata","useFragmentMetadata","useStagesMetadata","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","button","color","palette","getContrastText","primary","main","SiteAppBar","classes","showTextButtons","useMediaQuery","breakpoints","up","AppBar","position","Toolbar","Typography","variant","className","IconButton","component","RouterLink","to","Button","size","target","href","createCtx","reducer","initialState","ctx","React","createContext","state","dispatch","props","useReducer","Provider","value","action","type","filters","undefined","find","f","id","filterId","map","enabled","filter","s","Error","FilterProvider","FilterContext","stages","characters","fragments","data","distinctDates","d","i","arr","findIndex","t","date","Date","sort","b","getTime","currentMonth","length","toISOString","stories","MetadataProvider","MetadataContext","currentMonthFilter","label","canDelete","predicate","term","metadata","theDate","current","getMonth","getFullYear","timeFilters","filterColourMap","dimensionalClashdFilter","stageId","colour","trueShieldFilter","allWarFilter","futureEndsHereFilter","storyFilters","allFilters","useFilteredData","useContext","useState","filteredData","setFilteredData","useEffect","enabledFilters","fragmentFilters","startsWith","enabledFragmentFilters","some","filterGroups","every","fg","ef","filterData","setFilterState","filterDisabled","useFilters","setFilters","enableFilter","useCallback","disableFilter","useLocalStorage","key","defaultValue","saved","localStorage","getItem","JSON","parse","getStorageValue","setValue","setItem","stringify","defaultRoster","unowned","useRoster","roster","setRoster","setOwned","characterId","isOwned","hasOwnProperty","useStageGroupedData","groupedData","setGroupData","preparedData","Array","from","reduce","acc","val","character","c","stage","currentStageGroupedItem","get","set","characterId1","character1","characterId2","characterId3","character2","character3","Map","prepare","toolbar","backgroundColor","padding","paddingLeft","paddingBottom","marginTop","minHeight","display","flexWrap","chip","margin","chipHidden","TableFilterSection","onFilterClick","clsx","Chip","hidden","onClick","handleClick","style","useToolbarStyles","paddingRight","flex","TableToolbar","CharacterTextLabel","name","leadCalculator","stageData","teamCharacterId1","teamCharacterId2","teamCharacterId3","position1","position2","position3","width","paper","marginBottom","table","minWidth","visuallyHidden","border","clip","height","overflow","top","leader","light","red","unownedLabel","error","textDecoration","timeFilter","LeaderTable","team","Paper","TableContainer","Table","TableHead","TableRow","TableCell","fontWeight","TableBody","row","hover","subStage","CharacterSelector","onCharacterChange","Autocomplete","onChange","event","options","getOptionLabel","option","renderInput","params","TextField","selects","flexDirection","gap","TeamSelector","onTeamChange","setTeam","handleCharacterChange","index","updatedTeam","createStyles","combat","blast","speed","universal","t3","awakening","CharacterAvatar","Avatar","charAt","letter","typography","LeaderTableConcise","anchorEl","setAnchorEl","currentRowData","setCurrentRowData","open","Boolean","rowData","currentTarget","AvatarGroup","Popover","onClose","anchorOrigin","vertical","horizontal","transformOrigin","stickToBottom","bottom","marginLeft","actionLabel","TeamSelectorBar","currentPosition","setCurrentPosition","handleActionClick","handleClose","BottomNavigation","showLabels","newValue","BottomNavigationAction","selected","Menu","keepMounted","MenuItem","AutoplayPage","isLoading","showFullTable","teamCharacters","setTeamCharacters","handleTeamChange","Grid","container","item","sm","lg","RosterManagement","advancementType","Switch","checked","ManagePage","transition","transitions","create","easing","easeInOut","duration","short","toolbarHidden","easeIn","FilterSection","visible","isVisible","setIsVisible","onDelete","chipId","forEach","AreaBumpChart","areaBumpData","right","left","colors","scheme","blendMode","startLabel","axisTop","tickSize","tickPadding","tickRotation","legend","legendPosition","legendOffset","format","moment","axisBottom","getColour","bar","BarChart","memo","keys","flatMap","Object","Set","k","getKeys","indexBy","axisLeft","e","Math","floor","valueScale","labelSkipWidth","labelSkipHeight","labelTextColor","useRankTableData","rankData","setRankData","currentCount","characterName","count","useAreaBumpData","setAreaBumpData","top10","slice","areaData","uniqueDates","usageData","x","y","dataPoint","updatedDataPoint","story","currentCharacterItem","barCountItem","storyCharacterCount","useBarChartData","barData","setBarData","graphContainer","justifyContent","alignItems","graphSkeleteon","transform","GraphCard","metadataContext","filterContext","showTreemap","Skeleton","tableContainer","RankTable","rankedData","stickyHeader","align","scope","card","cardContent","float","contentContainer","RankTableCard","Card","CardHeader","animation","CardContent","_val","Fragment","StatsPage","xs","md","HomePage","filterDispatch","stageMetadata","isStageMetadataLoading","characterMetadata","isCharacterMetadataLoading","fragmentMetadata","isFragmentMetadataLoading","isDataLoading","fragment","stageIds","includes","path","element","createMuiTheme","purple","secondary","green","queryClient","QueryClient","defaultOptions","queries","refetchOnWindowFocus","App","QueryClientProvider","client","ThemeProvider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ed5aee6f.chunk.js","sourcesContent":["import { useQuery } from 'react-query';\n\nconst useCharacterBonus = () => {\n  return useQuery('characterBonus', async () => {\n    const res = await fetch(\n      'https://chrischen86.github.io/mff-data/selectedcharacterbonus.json'\n    );\n    return res.json();\n  });\n};\n\nexport default useCharacterBonus;\n","import { useQuery } from 'react-query';\n\nconst useCharactersMetadata = () => {\n  return useQuery('characters', async () => {\n    const res = await fetch(\n      'https://chrischen86.github.io/mff-data/characters.json'\n    );\n    return res.json();\n  });\n};\n\nexport default useCharactersMetadata;\n","import { useQuery } from 'react-query';\n\nconst useFragmentMetadata = () => {\n  return useQuery('fragments', async () => {\n    const res = await fetch(\n      'https://chrischen86.github.io/mff-data/fragments.json'\n    );\n    return res.json();\n  });\n};\n\nexport default useFragmentMetadata;\n","import { useQuery } from 'react-query';\n\nconst useStagesMetadata = () => {\n  return useQuery('stages', async () => {\n    const res = await fetch(\n      'https://chrischen86.github.io/mff-data/stages.json'\n    );\n    return res.json();\n  });\n};\n\nexport default useStagesMetadata;\n","import {\n  AppBar,\n  Button,\n  IconButton,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport GroupIcon from '@material-ui/icons/Group';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  button: {\n    color: theme.palette.getContrastText(theme.palette.primary.main),\n  },\n}));\n\nconst SiteAppBar = () => {\n  const classes = useStyles();\n  const showTextButtons = useMediaQuery((theme: Theme) =>\n    theme.breakpoints.up('sm')\n  );\n\n  return (\n    <AppBar position=\"static\">\n      <Toolbar>\n        <Typography variant=\"h6\" className={classes.title}></Typography>\n        {!showTextButtons && (\n          <>\n            <IconButton\n              component={RouterLink}\n              to={'/'}\n              className={classes.button}\n            >\n              <BarChartIcon />\n            </IconButton>\n            <IconButton\n              component={RouterLink}\n              to={'/autoplay'}\n              className={classes.button}\n            >\n              <PlayArrowIcon />\n            </IconButton>\n            <IconButton\n              component={RouterLink}\n              to={'/manage'}\n              className={classes.button}\n            >\n              <GroupIcon />\n            </IconButton>\n          </>\n        )}\n        {showTextButtons && (\n          <>\n            <Button\n              component={RouterLink}\n              to={'/'}\n              variant={'text'}\n              className={classes.button}\n              size={'large'}\n            >\n              Stats\n            </Button>\n            <Button\n              component={RouterLink}\n              to={'/autoplay'}\n              variant={'text'}\n              className={classes.button}\n              size={'large'}\n            >\n              Autoplay\n            </Button>\n            <Button\n              component={RouterLink}\n              to={'/manage'}\n              variant={'text'}\n              className={classes.button}\n              size={'large'}\n            >\n              Manage\n            </Button>\n          </>\n        )}\n        <IconButton\n          color=\"inherit\"\n          target=\"_blank\"\n          href={'https://github.com/chrischen86/mff-app'}\n        >\n          <GitHubIcon />\n        </IconButton>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default SiteAppBar;\n","import React from 'react';\n\nexport default function createCtx<StateType, ActionType>(\n  reducer: React.Reducer<StateType, ActionType>,\n  initialState: StateType\n) {\n  const defaultDispatch: React.Dispatch<ActionType> = () => initialState; // we never actually use this\n  const ctx = React.createContext({\n    state: initialState,\n    dispatch: defaultDispatch, // just to mock out the dispatch type and make it not optioanl\n  });\n\n  function Provider(props: React.PropsWithChildren<{}>) {\n    const [state, dispatch] = React.useReducer<\n      React.Reducer<StateType, ActionType>\n    >(reducer, initialState);\n    return <ctx.Provider value={{ state, dispatch }} {...props} />;\n  }\n  return [ctx, Provider] as const;\n}\n","import createCtx from './createCtx';\nimport { Filter } from '../filters/types';\n\nconst initialState: { filters: Filter[] } = {\n  filters: [],\n};\ntype FilterState = typeof initialState;\ntype Action =\n  | { type: 'add'; filters: Filter[] }\n  | { type: 'remove'; filters: Filter[] }\n  | { type: 'enable'; filterId: string }\n  | { type: 'disable'; filterId: string };\n\nconst reducer = (state: FilterState, action: Action): FilterState => {\n  switch (action.type) {\n    case 'add':\n      return {\n        ...state,\n        filters: action.filters,\n      };\n    case 'enable':\n    case 'disable': {\n      const filter = state.filters.find((f) => f.id === action.filterId);\n      if (filter === undefined) {\n        return state;\n      }\n\n      return {\n        ...state,\n        filters: state.filters.map((f) => {\n          return f.id === action.filterId\n            ? {\n                ...f,\n                enabled: action.type === 'disable' ? false : true,\n              }\n            : f;\n        }),\n      };\n    }\n    case 'remove':\n      return {\n        ...state,\n        filters: [\n          ...state.filters.filter((f) =>\n            action.filters.find((s) => s.id === f.id)\n          ),\n        ],\n      };\n    default:\n      throw new Error(`Uknown action type provided`);\n  }\n};\n\nconst [ctx, FilterProvider] = createCtx(reducer, initialState);\nexport const FilterContext = ctx;\n\nexport default FilterProvider;\n","import {\n  Character,\n  Stage,\n  SelectedCharacterBonus,\n  Metadata,\n  StoryFragment,\n} from '../types';\nimport createCtx from './createCtx';\n\nconst initialState: Metadata = {\n  stages: [],\n  characters: [],\n  stories: [],\n  fragments: [],\n  currentMonth: undefined,\n};\n\ntype MetadataState = typeof initialState;\ntype Action =\n  | { type: 'setStages'; stages: Stage[] }\n  | { type: 'setCharacters'; characters: Character[] }\n  | { type: 'setFragments'; fragments: StoryFragment[] }\n  | { type: 'calculateLastMonth'; data: SelectedCharacterBonus[] };\n\nconst reducer = (state: MetadataState, action: Action): MetadataState => {\n  switch (action.type) {\n    case 'setStages':\n      return {\n        ...state,\n        stages: action.stages,\n      };\n    case 'setCharacters':\n      return {\n        ...state,\n        characters: action.characters,\n      };\n    case 'setFragments':\n      return {\n        ...state,\n        fragments: action.fragments,\n      };\n    case 'calculateLastMonth': {\n      if (action.data === undefined) {\n        return state;\n      }\n      const distinctDates = action.data\n        .filter((d, i, arr) => arr.findIndex((t) => t.date === d.date) === i)\n        .map((d) => new Date(d.date))\n        .sort((a, b) => {\n          return a.getTime() - b.getTime();\n        });\n\n      return {\n        ...state,\n        currentMonth: distinctDates[distinctDates.length - 1].toISOString(),\n      };\n    }\n\n    default:\n      throw new Error(`Uknown action type provided`);\n  }\n};\n\nconst [ctx, MetadataProvider] = createCtx(reducer, initialState);\nexport const MetadataContext = ctx;\n\nexport default MetadataProvider;\n","import { Metadata, SelectedCharacterBonus } from '../types';\nimport { Filter } from './types';\n\nconst currentMonthFilter: Filter = {\n  id: 'currentMonth',\n  label: 'Current Month',\n  enabled: true,\n  canDelete: false,\n  predicate: (term: SelectedCharacterBonus, metadata: Metadata) => {\n    const theDate = new Date(term.date);\n    const current =\n      metadata.currentMonth === undefined\n        ? new Date()\n        : new Date(metadata.currentMonth);\n\n    return (\n      theDate.getMonth() === current.getMonth() &&\n      theDate.getFullYear() === current.getFullYear()\n    );\n  },\n};\nexport { currentMonthFilter };\n\nconst allTimeFilter: Filter = {\n  id: 'allTime',\n  label: 'All Time',\n  enabled: false,\n  canDelete: false,\n  predicate: (term: SelectedCharacterBonus) => {\n    return true;\n  },\n};\nexport { allTimeFilter };\nconst timeFilters = [currentMonthFilter, allTimeFilter];\nexport default timeFilters;\n","const futureColour = '#23a5d7';\nconst warColour = '#6d1895';\nconst shieldColour = '#3b7d57';\nconst dimensionColour = '#bf0001';\n\nconst filterColourMap: { [key: string]: string } = {\n  'Dimensional Clash': dimensionColour,\n  'The True SHIELD': shieldColour,\n  'The All War': warColour,\n  'The Future Ends Here': futureColour,\n};\n\nexport default filterColourMap;\n","import { SelectedCharacterBonus } from '../types';\nimport filterColourMap from './filterColours';\nimport { Filter } from './types';\n\nconst dimensionalClashdFilter: Filter = {\n  id: 'dimensionalClash',\n  label: 'Dimensional Clash',\n  enabled: true,\n  canDelete: true,\n  predicate: (term: SelectedCharacterBonus) => {\n    return term.stageId <= 20;\n  },\n  colour: filterColourMap['Dimensional Clash'],\n};\nexport { dimensionalClashdFilter };\n\nconst trueShieldFilter: Filter = {\n  id: 'trueShield',\n  label: 'The True SHIELD',\n  enabled: true,\n  canDelete: true,\n  predicate: (term: SelectedCharacterBonus) => {\n    return term.stageId >= 21 && term.stageId <= 24;\n  },\n  colour: filterColourMap['The True SHIELD'],\n};\nexport { trueShieldFilter };\n\nconst allWarFilter: Filter = {\n  id: 'allWar',\n  label: 'The All War',\n  enabled: true,\n  canDelete: true,\n  predicate: (term: SelectedCharacterBonus) => {\n    return term.stageId >= 25 && term.stageId <= 28;\n  },\n  colour: filterColourMap['The All War'],\n};\nexport { allWarFilter };\n\nconst futureEndsHereFilter: Filter = {\n  id: 'futureEndsHere',\n  label: 'The Future Ends Here',\n  enabled: true,\n  canDelete: true,\n  predicate: (term: SelectedCharacterBonus) => {\n    return term.stageId >= 29;\n  },\n  colour: filterColourMap['The Future Ends Here'],\n};\nexport { futureEndsHereFilter };\n\nconst storyFilters = [\n  dimensionalClashdFilter,\n  trueShieldFilter,\n  allWarFilter,\n  futureEndsHereFilter,\n];\nexport default storyFilters;\n","import timeFilters from './timeFilters';\nimport storyFilters from './storyFilters';\nimport { createFragmentFilters } from './fragmentFilters';\n\nexport { createFragmentFilters };\n\nconst allFilters = [...timeFilters, ...storyFilters];\nexport default allFilters;\n","import storyFilters from '../../filters/storyFilters';\nimport timeFilters from '../../filters/timeFilters';\nimport { Filter } from '../../filters/types';\nimport { Metadata, SelectedCharacterBonus } from '../../types';\nimport React from 'react';\nimport { MetadataContext } from '../../context/metadataContext';\n\nconst filterData = (\n  data: SelectedCharacterBonus[],\n  filters: Filter[],\n  metadata: Metadata\n): SelectedCharacterBonus[] => {\n  const enabledFilters = filters.filter((f) => f.enabled);\n  const fragmentFilters = filters.filter((f) => f.id.startsWith('fragment'));\n\n  const enabledFragmentFilters = fragmentFilters.some((f) => f.enabled);\n\n  let filterGroups = [timeFilters, storyFilters];\n  if (enabledFragmentFilters) {\n    filterGroups = [...filterGroups, fragmentFilters];\n  }\n  const filteredData = data.filter((d) =>\n    filterGroups.every((fg) =>\n      fg\n        .filter((f) => enabledFilters?.find((ef) => ef.id === f.id))\n        .some((f) => f.predicate(d, metadata))\n    )\n  );\n\n  return filteredData;\n};\n\nconst useFilteredData = (\n  data?: SelectedCharacterBonus[],\n  filters?: Filter[]\n): SelectedCharacterBonus[] => {\n  const { state: metadata } = React.useContext(MetadataContext);\n  const [filteredData, setFilteredData] = React.useState<\n    SelectedCharacterBonus[]\n  >([]);\n\n  React.useEffect(() => {\n    if (data === undefined) {\n      setFilteredData([]);\n    } else if (filters === undefined || filters.length <= 0) {\n      setFilteredData(data);\n    } else {\n      setFilteredData(filterData(data, filters, metadata));\n    }\n  }, [data, filters, metadata]);\n\n  return filteredData;\n};\n\nexport default useFilteredData;\n","import React from 'react';\nimport { Filter } from '../../filters/types';\n\nconst setFilterState = (\n  filters: Filter[],\n  filterId: string,\n  filterDisabled: boolean = false\n) => {\n  const filter = filters.find((f) => f.id === filterId);\n  if (filter === undefined) {\n    return filters;\n  }\n\n  return filters.map((f) => {\n    return f.id === filterId\n      ? {\n          ...f,\n          enabled: !filterDisabled,\n        }\n      : f;\n  });\n};\n\nconst useFilters = () => {\n  const [filters, setFilters] = React.useState<Filter[]>([]);\n\n  const enableFilter = React.useCallback(\n    (filterId: string) => {\n      setFilters(setFilterState(filters, filterId, false));\n    },\n    [filters]\n  );\n\n  const disableFilter = React.useCallback(\n    (filterId: string) => {\n      setFilters(setFilterState(filters, filterId, true));\n    },\n    [filters]\n  );\n\n  return { filters, setFilters, enableFilter, disableFilter };\n};\n\nexport default useFilters;\n","import React from 'react';\n\nconst getStorageValue = (key: string, defaultValue: any) => {\n  const saved: any = localStorage.getItem(key);\n  const initial = JSON.parse(saved);\n  return initial || defaultValue;\n};\n\nconst useLocalStorage = <T,>(key: string, defaultValue: any) => {\n  const [value, setValue] = React.useState<T>(() => {\n    return getStorageValue(key, defaultValue);\n  });\n\n  React.useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(value));\n  }, [key, value]);\n\n  return { value, setValue };\n};\nexport default useLocalStorage;\n","import { Roster } from '../types';\nimport useLocalStorage from './useLocalStorage';\n\nconst defaultRoster: Roster = { unowned: {} };\n\nconst useRoster = () => {\n  const { value: roster, setValue: setRoster } = useLocalStorage<Roster>(\n    'roster',\n    defaultRoster\n  );\n\n  const setOwned = (characterId: string, isOwned: boolean = true) => {\n    const { unowned } = roster;\n    if (isOwned) {\n      delete unowned[characterId];\n    } else {\n      if (!unowned.hasOwnProperty(characterId)) {\n        unowned[characterId] = true;\n      }\n    }\n    setRoster({ ...roster, unowned });\n  };\n\n  const isOwned = (characterId: string | null): boolean => {\n    const { unowned } = roster;\n    return !unowned.hasOwnProperty(characterId ?? '');\n  };\n\n  return { roster, setOwned, isOwned };\n};\n\nexport default useRoster;\n","import React from 'react';\nimport { MetadataContext } from '../../context/metadataContext';\nimport { Metadata, SelectedCharacterBonus } from '../../types';\nimport { StageGroupedData } from '../types';\n\nconst prepare = (\n  data: SelectedCharacterBonus[],\n  metadata: Metadata\n): StageGroupedData[] => {\n  const groupedData = Array.from(\n    data.reduce((acc, val) => {\n      const character = metadata.characters.find(\n        (c) => c.id === val.characterId\n      );\n\n      const stage = metadata.stages.find((s) => s.id === val.stageId);\n\n      const currentStageGroupedItem = acc.get(val.stageId);\n      if (currentStageGroupedItem === undefined) {\n        acc.set(val.stageId, {\n          stageId: val.stageId,\n          stage,\n          characterId1: val.characterId,\n          character1: character,\n          characterId2: null,\n          characterId3: null,\n        });\n      } else {\n        acc.set(val.stageId, {\n          ...currentStageGroupedItem,\n          characterId2: currentStageGroupedItem.characterId2 || val.characterId,\n          character2: currentStageGroupedItem.character2 || character,\n          characterId3:\n            currentStageGroupedItem.characterId3 ||\n            (currentStageGroupedItem.characterId2 && val.characterId),\n          character3:\n            currentStageGroupedItem.character3 ||\n            (currentStageGroupedItem.character2 && character),\n        });\n      }\n\n      return acc;\n    }, new Map<number, StageGroupedData>()),\n    ([key, value]) => ({ ...value })\n  );\n\n  return groupedData;\n};\n\nconst useStageGroupedData = (\n  data: SelectedCharacterBonus[]\n): StageGroupedData[] => {\n  const { state: metadata } = React.useContext(MetadataContext);\n  const [groupedData, setGroupData] = React.useState<StageGroupedData[]>([]);\n\n  React.useEffect(() => {\n    if (data !== undefined) {\n      const preparedData = prepare(data, metadata);\n      setGroupData(preparedData);\n    }\n  }, [data, metadata]);\n\n  return groupedData;\n};\n\nexport default useStageGroupedData;\n","import { Chip, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport React from 'react';\nimport { Filter } from '../filters/types';\n\nconst useStyles = makeStyles((theme) => ({\n  toolbar: {\n    backgroundColor: 'inherit',\n    padding: 0,\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n    marginTop: theme.spacing(-1),\n    minHeight: 0,\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: theme.spacing(0.5),\n  },\n  chipHidden: {\n    display: 'none',\n  },\n}));\n\nconst TableFilterSection = ({\n  filters = [],\n  onFilterClick,\n}: {\n  filters: Filter[];\n  onFilterClick?: Function;\n}) => {\n  const classes = useStyles();\n\n  const handleClick = (filter: Filter) => {\n    if (onFilterClick !== undefined) {\n      onFilterClick(filter);\n    }\n  };\n\n  if (filters.length <= 0) {\n    return null;\n  }\n\n  return (\n    <Toolbar className={clsx(classes.toolbar)}>\n      {filters.map((filter) => {\n        return (\n          <Chip\n            key={filter.id}\n            label={filter.label}\n            className={clsx(classes.chip, filter.hidden && classes.chipHidden)}\n            onClick={() => handleClick(filter)}\n            color={filter.enabled ? 'primary' : undefined}\n            size={'small'}\n            style={{\n              backgroundColor: filter.enabled ? filter.colour : undefined,\n            }}\n          />\n        );\n      })}\n    </Toolbar>\n  );\n};\n\nexport default TableFilterSection;\n","import { Toolbar, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n  },\n  title: {\n    flex: '1 1 100%',\n  },\n}));\n\nconst TableToolbar = ({ title }: { title: string }) => {\n  const classes = useToolbarStyles();\n  return (\n    <Toolbar className={classes.root}>\n      <Typography\n        variant=\"h5\"\n        id=\"tableTitle\"\n        component=\"div\"\n        className={classes.title}\n      >\n        {title}\n      </Typography>\n    </Toolbar>\n  );\n};\n\nexport default TableToolbar;\n","import React from 'react';\nimport { MetadataContext } from '../../context/metadataContext';\n\nconst CharacterTextLabel = ({\n  characterId,\n}: {\n  characterId: string | null;\n}) => {\n  const {\n    state: { characters },\n  } = React.useContext(MetadataContext);\n\n  const character = characters.find((c) => characterId === c.id);\n  if (character === undefined) {\n    return <>{characterId}</>;\n  }\n  return <>{character.name}</>;\n};\n\nexport default CharacterTextLabel;\n","import { Roster, StageGroupedData } from '../../components/types';\n\nconst leadCalculator = (\n  stageData: StageGroupedData,\n  teamCharacterId1: string | null = null,\n  teamCharacterId2: string | null = null,\n  teamCharacterId3: string | null = null,\n  roster?: Roster\n) => {\n  let {\n    characterId1: position1,\n    characterId2: position2,\n    characterId3: position3,\n  } = stageData;\n\n  if (roster !== undefined) {\n    const { unowned } = roster;\n    if (position1 && unowned.hasOwnProperty(position1)) {\n      position1 = teamCharacterId1;\n    }\n\n    if (position2 && unowned.hasOwnProperty(position2)) {\n      position2 = teamCharacterId2;\n    }\n\n    if (position3 && unowned.hasOwnProperty(position3)) {\n      position3 = teamCharacterId3;\n    }\n  }\n\n  if (!teamCharacterId1 && !teamCharacterId2 && !teamCharacterId3) {\n    return { position1, position2, position3 };\n  }\n\n  if (teamCharacterId3 === position1) {\n    position1 = position3;\n    position3 = teamCharacterId3;\n  } else if (teamCharacterId3 === position2) {\n    position2 = position3;\n    position3 = teamCharacterId3;\n  }\n\n  if (teamCharacterId2 === position1) {\n    position1 = position2;\n    position2 = teamCharacterId2;\n  } else if (teamCharacterId2 === position3) {\n    position3 = position2;\n    position2 = teamCharacterId2;\n  }\n\n  if (teamCharacterId1 === position2) {\n    position2 = position1;\n    position1 = teamCharacterId1;\n  } else if (teamCharacterId1 === position3) {\n    position3 = position1;\n    position1 = teamCharacterId1;\n  }\n  return { position1, position2, position3 };\n};\n\nexport default leadCalculator;\n","import {\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport React from 'react';\nimport useFilteredData from '../../components/hooks/useFilteredData';\nimport useFilters from '../../components/hooks/useFilters';\nimport useRoster from '../../components/hooks/useRoster';\nimport useStageGroupedData from '../../components/hooks/useStageGroupedData';\nimport TableFilterSection from '../../components/TableFilterSection';\nimport TableToolbar from '../../components/TableToolbar';\nimport {\n  allWarFilter,\n  dimensionalClashdFilter,\n  futureEndsHereFilter,\n  trueShieldFilter,\n} from '../../filters/storyFilters';\nimport { currentMonthFilter } from '../../filters/timeFilters';\nimport { Filter } from '../../filters/types';\nimport { SelectedCharacterBonus } from '../../types';\nimport CharacterTextLabel from './CharacterTextLabel';\nimport leadCalculator from './leadCalculator';\nimport red from '@material-ui/core/colors/red';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n  },\n  table: {\n    minWidth: 750,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n  leader: {\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.getContrastText(theme.palette.primary.light),\n  },\n  unowned: {\n    backgroundColor: red[100],\n    color: theme.palette.getContrastText(red[100]),\n  },\n  unownedLabel: {\n    color: theme.palette.error.main,\n    textDecoration: 'line-through',\n  },\n}));\n\nconst timeFilter = { ...currentMonthFilter, hidden: true };\n\nconst LeaderTable = ({\n  data,\n  team,\n}: {\n  data: SelectedCharacterBonus[];\n  team: (string | null)[];\n}) => {\n  const classes = useStyles();\n  const { filters, setFilters } = useFilters();\n  const filteredData = useFilteredData(data, filters);\n  const groupedData = useStageGroupedData(filteredData);\n  const { roster, isOwned } = useRoster();\n\n  React.useEffect(() => {\n    setFilters([\n      timeFilter,\n      dimensionalClashdFilter,\n      { ...trueShieldFilter, enabled: false },\n      { ...allWarFilter, enabled: false },\n      { ...futureEndsHereFilter, enabled: false },\n    ]);\n  }, [setFilters]);\n\n  const handleFilterClick = (filter: Filter) => {\n    setFilters([\n      timeFilter,\n      ...filters\n        .filter((f) => f.id !== timeFilter.id)\n        .map((f) => {\n          return {\n            ...f,\n            enabled: filter.id === f.id,\n          };\n        }),\n    ]);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <TableToolbar title={'Autoplay Story Leader'} />\n        <TableFilterSection\n          filters={filters}\n          onFilterClick={handleFilterClick}\n        />\n        <TableContainer>\n          <Table size={'small'}>\n            <TableHead>\n              <TableRow>\n                <TableCell>Stage</TableCell>\n                <TableCell>Character 1</TableCell>\n                <TableCell>Character 2</TableCell>\n                <TableCell>Character 3</TableCell>\n                <TableCell style={{ fontWeight: 'bold' }}>Leader</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {groupedData.map((row) => {\n                const { position1: leader } = leadCalculator(\n                  row,\n                  team[0],\n                  team[1],\n                  team[2],\n                  roster\n                );\n\n                return (\n                  <TableRow key={row.stageId} hover>\n                    <TableCell>\n                      {row.stage\n                        ? `${row.stage.stage}-${row.stage.subStage}`\n                        : row.stageId}\n                    </TableCell>\n                    <TableCell\n                      className={clsx(\n                        !isOwned(row.characterId1) && classes.unownedLabel\n                      )}\n                    >\n                      {row.character1 ? row.character1.name : row.characterId1}\n                    </TableCell>\n                    <TableCell\n                      className={clsx(\n                        !isOwned(row.characterId2) && classes.unownedLabel\n                      )}\n                    >\n                      {row.character2 ? row.character2.name : row.characterId2}\n                    </TableCell>\n                    <TableCell\n                      className={clsx(\n                        !isOwned(row.characterId3) && classes.unownedLabel\n                      )}\n                    >\n                      {row.character3 ? row.character3.name : row.characterId3}\n                    </TableCell>\n                    <TableCell\n                      className={clsx(\n                        row.characterId1 !== leader && classes.leader,\n                        leader === null && classes.unowned\n                      )}\n                    >\n                      <CharacterTextLabel characterId={leader ?? 'LEAD'} />\n                    </TableCell>\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n    </div>\n  );\n};\n\nexport default LeaderTable;\n","import { TextField } from '@material-ui/core';\nimport { Autocomplete } from '@material-ui/lab';\nimport { Character } from '../../types';\n\nconst CharacterSelector = ({\n  characters,\n  label,\n  value = null,\n  onCharacterChange,\n}: {\n  characters: Character[];\n  label: string;\n  value: Character | null;\n  onCharacterChange?: Function;\n}) => {\n  const handleOnChange = (event: any, character: Character | null) => {\n    if (onCharacterChange !== undefined) {\n      onCharacterChange(character);\n    }\n  };\n\n  return (\n    <Autocomplete\n      value={value}\n      onChange={handleOnChange}\n      options={characters}\n      getOptionLabel={(option) => option.name}\n      renderInput={(params) => (\n        <TextField {...params} label={label} variant=\"outlined\" />\n      )}\n    />\n  );\n};\n\nexport default CharacterSelector;\n","import { Paper, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { MetadataContext } from '../../context/metadataContext';\nimport { Character } from '../../types';\nimport CharacterSelector from './CharacterSelector';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '90%',\n  },\n  paper: {\n    width: '100%',\n    padding: theme.spacing(2),\n  },\n  selects: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(2),\n  },\n  title: {\n    paddingRight: theme.spacing(1),\n    paddingBottom: theme.spacing(2),\n  },\n}));\n\nconst TeamSelector = ({ onTeamChange }: { onTeamChange?: Function }) => {\n  const classes = useStyles();\n  const {\n    state: { characters },\n  } = React.useContext(MetadataContext);\n\n  const [team, setTeam] = React.useState<(Character | null)[]>([\n    null,\n    null,\n    null,\n  ]);\n\n  const handleCharacterChange = (character: Character, index: number) => {\n    const updatedTeam = [...team];\n    updatedTeam[index] = character;\n    setTeam(updatedTeam);\n\n    if (onTeamChange !== undefined) {\n      onTeamChange(updatedTeam.map((t) => t?.id));\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <Typography variant={'h5'} className={classes.title}>\n          Team Configuration\n        </Typography>\n        <div className={classes.selects}>\n          <CharacterSelector\n            characters={characters}\n            label={'Lead'}\n            value={team[0]}\n            onCharacterChange={(character: Character) =>\n              handleCharacterChange(character, 0)\n            }\n          />\n          <CharacterSelector\n            characters={characters}\n            label={'2nd'}\n            value={team[1]}\n            onCharacterChange={(character: Character) =>\n              handleCharacterChange(character, 1)\n            }\n          />\n          <CharacterSelector\n            characters={characters}\n            label={'3rd'}\n            value={team[2]}\n            onCharacterChange={(character: Character) =>\n              handleCharacterChange(character, 2)\n            }\n          />\n        </div>\n      </Paper>\n    </div>\n  );\n};\n\nexport default TeamSelector;\n","import { Avatar } from '@material-ui/core';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport React from 'react';\nimport { Character } from '../../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    combat: {\n      backgroundColor: '#c73d2a',\n      color: theme.palette.getContrastText('#c73d2a'),\n    },\n    blast: {\n      backgroundColor: '#367bcf',\n      color: theme.palette.getContrastText('#367bcf'),\n    },\n    speed: {\n      backgroundColor: '#44912b',\n      color: theme.palette.getContrastText('#44912b'),\n    },\n    universal: {\n      backgroundColor: '#682b79',\n      color: theme.palette.getContrastText('#682b79'),\n    },\n    t3: {\n      backgroundColor: '#d37c2e',\n      color: theme.palette.getContrastText('#d37c2e'),\n    },\n    awakening: {\n      backgroundColor: '#3a1970',\n      color: theme.palette.getContrastText('#3a1970'),\n    },\n  })\n);\n\nconst CharacterAvatar = ({\n  character,\n}: {\n  character: Character | string | null;\n}) => {\n  const classes = useStyles();\n\n  if (character === null) {\n    return <Avatar>?</Avatar>;\n  }\n\n  if (typeof character === 'string') {\n    return <Avatar>{character.charAt(0)}</Avatar>;\n  }\n\n  const letter = character.name.charAt(0);\n  return (\n    <Avatar\n      className={clsx(\n        character.type === 'Combat' && classes.combat,\n        character.type === 'Blast' && classes.blast,\n        character.type === 'Speed' && classes.speed,\n        character.type === 'Universal' && classes.universal\n      )}\n    >\n      {letter}\n    </Avatar>\n  );\n};\n\nexport default CharacterAvatar;\n","import {\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Typography,\n} from '@material-ui/core';\nimport red from '@material-ui/core/colors/red';\nimport Popover from '@material-ui/core/Popover';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AvatarGroup } from '@material-ui/lab';\nimport clsx from 'clsx';\nimport React from 'react';\nimport useFilteredData from '../../components/hooks/useFilteredData';\nimport useFilters from '../../components/hooks/useFilters';\nimport useRoster from '../../components/hooks/useRoster';\nimport useStageGroupedData from '../../components/hooks/useStageGroupedData';\nimport TableFilterSection from '../../components/TableFilterSection';\nimport TableToolbar from '../../components/TableToolbar';\nimport { StageGroupedData } from '../../components/types';\nimport {\n  allWarFilter,\n  dimensionalClashdFilter,\n  futureEndsHereFilter,\n  trueShieldFilter,\n} from '../../filters/storyFilters';\nimport { currentMonthFilter } from '../../filters/timeFilters';\nimport { Filter } from '../../filters/types';\nimport { SelectedCharacterBonus } from '../../types';\nimport CharacterAvatar from './CharacterAvatar';\nimport CharacterTextLabel from './CharacterTextLabel';\nimport leadCalculator from './leadCalculator';\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    marginBottom: theme.spacing(5),\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n  },\n  leader: {\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.getContrastText(theme.palette.primary.light),\n  },\n  unowned: {\n    backgroundColor: red[100],\n    color: theme.palette.getContrastText(red[100]),\n  },\n  typography: {\n    padding: theme.spacing(2),\n  },\n}));\n\nconst timeFilter = { ...currentMonthFilter, hidden: true };\n\nconst LeaderTableConcise = ({\n  data,\n  team,\n}: {\n  data: SelectedCharacterBonus[];\n  team: (string | null)[];\n}) => {\n  const classes = useStyles();\n  const { filters, setFilters } = useFilters();\n  const filteredData = useFilteredData(data, filters);\n  const groupedData = useStageGroupedData(filteredData);\n  const { roster } = useRoster();\n\n  const [anchorEl, setAnchorEl] = React.useState<HTMLTableCellElement | null>(\n    null\n  );\n  const [currentRowData, setCurrentRowData] = React.useState<string>('');\n\n  const handleClick = (\n    event: React.MouseEvent<HTMLTableCellElement>,\n    rowData: StageGroupedData\n  ) => {\n    setAnchorEl(event.currentTarget);\n    setCurrentRowData(\n      `${rowData.character1?.name}, ${rowData.character2?.name}, ${rowData.character3?.name}`\n    );\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  React.useEffect(() => {\n    setFilters([\n      timeFilter,\n      dimensionalClashdFilter,\n      { ...trueShieldFilter, enabled: false, label: 'SHIELD' },\n      { ...allWarFilter, enabled: false, label: 'All War' },\n      { ...futureEndsHereFilter, enabled: false, label: 'Future Ends' },\n    ]);\n  }, [setFilters]);\n\n  const handleFilterClick = (filter: Filter) => {\n    setFilters([\n      timeFilter,\n      ...filters\n        .filter((f) => f.id !== timeFilter.id)\n        .map((f) => {\n          return {\n            ...f,\n            enabled: filter.id === f.id,\n          };\n        }),\n    ]);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'simple-popover' : undefined;\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <TableToolbar title={'Autoplay Story Leader'} />\n        <TableFilterSection\n          filters={filters}\n          onFilterClick={handleFilterClick}\n        />\n        <TableContainer>\n          <Table size={'small'}>\n            <TableHead>\n              <TableRow>\n                <TableCell>Stage</TableCell>\n                <TableCell>Toons</TableCell>\n                <TableCell style={{ fontWeight: 'bold' }}>Leader</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {groupedData.map((row) => {\n                const { position1: leader } = leadCalculator(\n                  row,\n                  team[0],\n                  team[1],\n                  team[2],\n                  roster\n                );\n\n                return (\n                  <TableRow key={row.stageId} hover>\n                    <TableCell>\n                      {row.stage\n                        ? `${row.stage.stage}-${row.stage.subStage}`\n                        : row.stageId}\n                    </TableCell>\n                    <TableCell onClick={(event) => handleClick(event, row)}>\n                      <AvatarGroup>\n                        <CharacterAvatar\n                          character={row.character1 || row.characterId1}\n                        />\n                        <CharacterAvatar\n                          character={row.character2 || row.characterId2}\n                        />\n                        <CharacterAvatar\n                          character={row.character3 || row.characterId3}\n                        />\n                      </AvatarGroup>\n                    </TableCell>\n\n                    <TableCell\n                      className={clsx(\n                        row.characterId1 !== leader && classes.leader,\n                        leader === null && classes.unowned\n                      )}\n                    >\n                      <CharacterTextLabel characterId={leader ?? 'LEAD'} />\n                    </TableCell>\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n      >\n        <Typography className={classes.typography}>{currentRowData}</Typography>\n      </Popover>\n    </div>\n  );\n};\n\nexport default LeaderTableConcise;\n","import {\n  BottomNavigation,\n  BottomNavigationAction,\n  Menu,\n  MenuItem,\n} from '@material-ui/core';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport React from 'react';\nimport { MetadataContext } from '../../context/metadataContext';\nimport { Character } from '../../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    stickToBottom: {\n      width: '100%',\n      position: 'fixed',\n      bottom: 0,\n      backgroundColor: '#648dae',\n\n      marginLeft: theme.spacing(-2),\n    },\n    actionLabel: {\n      color: theme.palette.getContrastText(theme.palette.primary.light),\n      fontWeight: 'bold',\n    },\n  })\n);\n\nconst TeamSelectorBar = ({ onTeamChange }: { onTeamChange?: Function }) => {\n  const classes = useStyles();\n  const {\n    state: { characters },\n  } = React.useContext(MetadataContext);\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [currentPosition, setCurrentPosition] = React.useState(0);\n  const [team, setTeam] = React.useState<(string | null)[]>([null, null, null]);\n\n  const handleActionClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = (\n    event: React.MouseEvent<HTMLLIElement> | null,\n    character: Character | null\n  ) => {\n    setAnchorEl(null);\n\n    const updatedTeam = [...team];\n    updatedTeam[currentPosition] = character ? character.id : null;\n    setTeam(updatedTeam);\n\n    if (onTeamChange !== undefined) {\n      onTeamChange(updatedTeam);\n    }\n  };\n\n  return (\n    <>\n      <BottomNavigation\n        className={classes.stickToBottom}\n        showLabels\n        value={currentPosition}\n        onChange={(event, newValue) => {\n          setCurrentPosition(newValue);\n        }}\n      >\n        <BottomNavigationAction\n          label={characters.find((c) => c.id === team[0])?.name ?? 'Lead'}\n          onClick={handleActionClick}\n          classes={{\n            selected: classes.actionLabel,\n            label: classes.actionLabel,\n          }}\n        />\n        <BottomNavigationAction\n          label={characters.find((c) => c.id === team[1])?.name ?? '2nd'}\n          onClick={handleActionClick}\n          classes={{\n            selected: classes.actionLabel,\n            label: classes.actionLabel,\n          }}\n        />\n        <BottomNavigationAction\n          label={characters.find((c) => c.id === team[2])?.name ?? '3rd'}\n          onClick={handleActionClick}\n          classes={{\n            selected: classes.actionLabel,\n            label: classes.actionLabel,\n          }}\n        />\n      </BottomNavigation>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={(event) => handleClose(null, null)}\n      >\n        {characters.map((character) => {\n          return (\n            <MenuItem\n              key={character.id}\n              onClick={(event) => handleClose(event, character)}\n            >\n              {character.name}\n            </MenuItem>\n          );\n        })}\n      </Menu>\n    </>\n  );\n};\nexport default TeamSelectorBar;\n","import { Grid } from '@material-ui/core';\nimport React from 'react';\nimport { SelectedCharacterBonus } from '../../types';\nimport LeaderTable from './LeaderTable';\nimport TeamSelector from './TeamSelector';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { Theme } from '@material-ui/core/styles';\nimport LeaderTableConcise from './LeaderTableConcise';\n\nimport TeamSelectorBar from './TeamSelectorBar';\n\nconst AutoplayPage = ({\n  data,\n  isLoading,\n}: {\n  data: SelectedCharacterBonus[];\n  isLoading: boolean;\n}) => {\n  const showFullTable = useMediaQuery((theme: Theme) =>\n    theme.breakpoints.up('sm')\n  );\n\n  const [teamCharacters, setTeamCharacters] = React.useState<(string | null)[]>(\n    [null, null, null]\n  );\n\n  const handleTeamChange = (characters: string[]) => {\n    setTeamCharacters(characters);\n  };\n\n  if (isLoading) {\n    return <div />;\n  }\n\n  return (\n    <>\n      {!showFullTable && (\n        <div>\n          <LeaderTableConcise data={data} team={teamCharacters} />\n          <TeamSelectorBar onTeamChange={handleTeamChange} />\n        </div>\n      )}\n      {showFullTable && (\n        <Grid container spacing={3}>\n          <Grid item sm={12} lg={8}>\n            <LeaderTable data={data} team={teamCharacters} />\n          </Grid>\n          <Grid item sm={12} lg={4}>\n            <TeamSelector onTeamChange={handleTeamChange} />\n          </Grid>\n        </Grid>\n      )}\n    </>\n  );\n};\n\nexport default AutoplayPage;\n","import {\n  makeStyles,\n  Paper,\n  Switch,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport React from 'react';\nimport useRoster from '../../components/hooks/useRoster';\nimport TableToolbar from '../../components/TableToolbar';\nimport { Character } from '../../types';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n  },\n  table: {\n    minWidth: 750,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n  leader: {\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.getContrastText(theme.palette.primary.light),\n  },\n}));\n\nconst RosterManagement = ({ characters }: { characters: Character[] }) => {\n  const classes = useStyles();\n  const { roster, setOwned } = useRoster();\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <TableToolbar title={'Roster Management'} />\n        <TableContainer>\n          <Table size={'small'}>\n            <TableHead>\n              <TableRow>\n                <TableCell>Name</TableCell>\n                <TableCell>Advancement</TableCell>\n                <TableCell>Owned?</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {characters.map((row) => {\n                const handleOnChange = (\n                  event: React.ChangeEvent<HTMLInputElement>\n                ) => {\n                  setOwned(row.id, event.target.checked);\n                };\n\n                return (\n                  <TableRow key={row.id} hover>\n                    <TableCell>{row.name}</TableCell>\n                    <TableCell>{row.advancementType}</TableCell>\n                    <TableCell>\n                      <Switch\n                        checked={!roster.unowned.hasOwnProperty(row.id)}\n                        onChange={handleOnChange}\n                      />\n                    </TableCell>\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n    </div>\n  );\n};\n\nexport default RosterManagement;\n","import React from 'react';\nimport { MetadataContext } from '../../context/metadataContext';\nimport RosterManagement from './RosterManagement';\n\nconst ManagePage = () => {\n  const {\n    state: { characters },\n  } = React.useContext(MetadataContext);\n\n  return <RosterManagement characters={characters} />;\n};\n\nexport default ManagePage;\n","import { Toolbar, IconButton, Chip } from '@material-ui/core';\nimport React from 'react';\nimport { Filter } from '../filters/types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport FilterIcon from '@material-ui/icons/FilterList';\nimport { FilterContext } from '../context/filterContext';\nimport timeFilters from '../filters/timeFilters';\n\nconst useStyles = makeStyles((theme) => ({\n  toolbar: {\n    backgroundColor: '#f5f5f5',\n    display: 'flex',\n    flexWrap: 'wrap',\n    padding: theme.spacing(0.5),\n    transition: theme.transitions.create(\n      ['padding', 'min-height', 'background-color'],\n      {\n        easing: theme.transitions.easing.easeInOut,\n        duration: theme.transitions.duration.short,\n      }\n    ),\n    position: 'sticky',\n  },\n  toolbarHidden: {\n    backgroundColor: 'inherit',\n    padding: 0,\n    paddingLeft: theme.spacing(0.5),\n    minHeight: 0,\n    transition: theme.transitions.create(\n      ['padding', 'min-height', 'background-color'],\n      {\n        easing: theme.transitions.easing.easeIn,\n        duration: theme.transitions.duration.short,\n      }\n    ),\n  },\n  chip: {\n    margin: theme.spacing(0.5),\n  },\n  chipHidden: {\n    display: 'none',\n  },\n}));\n\nconst FilterSection = ({ visible = false }: { visible?: boolean }) => {\n  const [isVisible, setIsVisible] = React.useState(visible);\n  const { state, dispatch } = React.useContext(FilterContext);\n  const classes = useStyles();\n\n  const handleDelete = (chipId: string) => {\n    dispatch({\n      type: 'disable',\n      filterId: chipId,\n    });\n  };\n\n  const handleClick = (filter: Filter) => {\n    if (timeFilters.find((f) => f.id === filter.id)) {\n      const others = timeFilters.filter((f) => f.id !== filter.id);\n      others.forEach((f) => {\n        dispatch({\n          type: filter.enabled ? 'enable' : 'disable',\n          filterId: f.id,\n        });\n      });\n    }\n    dispatch({\n      type: filter.enabled ? 'disable' : 'enable',\n      filterId: filter.id,\n    });\n  };\n\n  if (!isVisible && state.filters.length <= 0) {\n    return null;\n  }\n\n  return (\n    <Toolbar\n      className={clsx(classes.toolbar, !isVisible && classes.toolbarHidden)}\n    >\n      <IconButton onClick={() => setIsVisible(!isVisible)}>\n        <FilterIcon />\n      </IconButton>\n      {state.filters?.map((filter) => {\n        return (\n          <Chip\n            key={filter.id}\n            label={filter.label}\n            className={clsx(\n              classes.chip,\n              !isVisible && !filter.enabled && classes.chipHidden\n            )}\n            onDelete={\n              !isVisible && filter.canDelete\n                ? () => handleDelete(filter.id)\n                : undefined\n            }\n            onClick={isVisible ? () => handleClick(filter) : undefined}\n            color={filter.enabled ? 'primary' : undefined}\n            size={isVisible ? 'medium' : 'small'}\n            style={{\n              backgroundColor: filter.enabled ? filter.colour : undefined,\n            }}\n          />\n        );\n      })}\n    </Toolbar>\n  );\n};\n\nexport default FilterSection;\n","import React from 'react';\nimport { AreaBumpInputSerie, ResponsiveAreaBump } from '@nivo/bump';\nimport moment from 'moment';\n\nconst AreaBumpChart = ({\n  areaBumpData,\n}: {\n  areaBumpData: AreaBumpInputSerie[];\n}) => {\n  return (\n    <ResponsiveAreaBump\n      data={areaBumpData}\n      margin={{ top: 40, right: 100, bottom: 40, left: 100 }}\n      spacing={8}\n      colors={{ scheme: 'nivo' }}\n      blendMode=\"multiply\"\n      startLabel=\"id\"\n      axisTop={{\n        tickSize: 5,\n        tickPadding: 5,\n        tickRotation: 0,\n        legend: 'Top 10 Ranking Over Time',\n        legendPosition: 'middle',\n        legendOffset: -28,\n        format: function (value: string) {\n          return moment(value).format('MMM YYYY');\n        },\n      }}\n      axisBottom={{\n        tickSize: 5,\n        tickPadding: 5,\n        tickRotation: 0,\n        legend: '',\n        legendPosition: 'middle',\n        legendOffset: 32,\n        format: function (value: string) {\n          return moment(value).format('MMM YYYY');\n        },\n      }}\n    />\n  );\n};\n\nexport default AreaBumpChart;\n","import { ResponsiveBar } from '@nivo/bar';\nimport React from 'react';\nimport { BarItem } from './types';\n\nimport filterColourMap from '../filters/filterColours';\n\nconst getKeys = (data: BarItem[]) => {\n  const keys = data.flatMap((d) => Object.keys(d));\n  return Array.from(new Set(keys)).filter((k) => k !== 'characterName');\n};\n\nconst getColour = (bar: any) => {\n  const { id } = bar;\n  return filterColourMap[id];\n};\n\nconst BarChart = React.memo(({ data }: { data: BarItem[] }) => {\n  const keys = getKeys(data);\n  return (\n    <ResponsiveBar\n      data={data}\n      indexBy={'characterName'}\n      keys={keys}\n      margin={{ top: 10, right: 10, bottom: 80, left: 30 }}\n      axisLeft={{\n        tickSize: 5,\n        tickPadding: 5,\n        tickRotation: 0,\n        format: (e) => {\n          if (typeof e === 'number') {\n            return Math.floor(e) === e ? e : '';\n          }\n          return '';\n        },\n      }}\n      axisBottom={{\n        tickRotation: -45,\n        tickPadding: 10,\n      }}\n      valueScale={{ type: 'linear' }}\n      labelSkipWidth={12}\n      labelSkipHeight={12}\n      labelTextColor=\"white\"\n      colors={getColour}\n    />\n  );\n});\n\nexport default BarChart;\n","import React from 'react';\nimport { Metadata, SelectedCharacterBonus } from '../../types';\nimport { BonusesCount } from '../types';\n\nconst prepare = (\n  data: SelectedCharacterBonus[],\n  metadata?: Metadata\n): BonusesCount[] => {\n  const rankData = Array.from(\n    data.reduce((acc, val) => {\n      const currentCount = acc.get(val.characterId);\n      acc.set(val.characterId, currentCount ? currentCount + 1 : 1);\n      return acc;\n    }, new Map<string, number>()),\n    ([key, value]) => {\n      const characterName =\n        metadata?.characters.find((c) => c.id === key)?.name || key;\n      return {\n        characterName,\n        count: value,\n      };\n    }\n  ).sort((a, b) => b.count - a.count);\n\n  return rankData;\n};\n\nconst useRankTableData = (\n  data: SelectedCharacterBonus[],\n  metadata?: Metadata\n): BonusesCount[] => {\n  const [rankData, setRankData] = React.useState<BonusesCount[]>([]);\n\n  React.useEffect(() => {\n    setRankData(prepare(data, metadata));\n  }, [data, metadata]);\n  return rankData;\n};\n\nexport default useRankTableData;\n","import { SelectedCharacterBonus } from '../../types';\nimport { AreaBumpInputSerie } from '@nivo/bump';\nimport useRankTableData from './useRankTableData';\nimport React from 'react';\n\nconst prepare = (data: SelectedCharacterBonus[]): AreaBumpInputSerie[] => {\n  const uniqueDates = Array.from(new Set(data.map((d) => d.date)));\n  const areaBumpData = Array.from(\n    data.reduce((acc, val) => {\n      const usageData = acc.get(val.characterId);\n\n      if (usageData === undefined) {\n        acc.set(val.characterId, [\n          ...uniqueDates.map((d) => ({\n            x: d,\n            y: d === val.date ? 1 : 0,\n          })),\n        ]);\n      } else {\n        const dataPoint = usageData.find((d) => d.x === val.date);\n        if (dataPoint === undefined) {\n          acc.set(val.characterId, [\n            ...usageData.filter((d) => d.x !== val.date),\n            { x: val.date, y: 1 },\n          ]);\n        } else {\n          const updatedDataPoint = {\n            ...dataPoint,\n            y: dataPoint.y + 1,\n          };\n          acc.set(\n            val.characterId,\n            usageData.map((d) => (d.x === val.date ? updatedDataPoint : d))\n          );\n        }\n      }\n\n      return acc;\n    }, new Map<string, { x: string; y: number }[]>()),\n    ([key, value]) => ({ id: key, data: value })\n  );\n\n  return areaBumpData;\n};\n\nconst useAreaBumpData = (\n  data: SelectedCharacterBonus[]\n): AreaBumpInputSerie[] => {\n  const [areaBumpData, setAreaBumpData] = React.useState<AreaBumpInputSerie[]>(\n    []\n  );\n  const rankData = useRankTableData(data);\n\n  React.useEffect(() => {\n    const top10 = rankData.slice(0, 10);\n    const areaData = prepare(data);\n    setAreaBumpData(\n      areaData.filter((d) => top10.find((t) => t.characterName === d.id))\n    );\n  }, [data, rankData]);\n  return areaBumpData;\n};\n\nexport default useAreaBumpData;\n","import React from 'react';\nimport { Metadata, SelectedCharacterBonus, Stage } from '../../types';\nimport { BarItem } from '../types';\n\nconst getKeys = (data: Stage[]) => {\n  const keys = data.flatMap((d) => d.story);\n  return Array.from(new Set(keys));\n};\n\ninterface BarCountItem {\n  [key: string]: number;\n}\n\nconst prepare = (\n  data: SelectedCharacterBonus[],\n  metadata: Metadata\n): BarItem[] => {\n  const keys = getKeys(metadata.stages);\n  const rankData = Array.from(\n    data.reduce((acc, val) => {\n      const story =\n        metadata.stages.find((s) => s.id === val.stageId)?.story ||\n        `Stage ${val.stageId}`;\n\n      const characterName =\n        metadata.characters.find((c) => c.id === val.characterId)?.name ||\n        val.characterId;\n\n      const currentCharacterItem = acc.get(characterName);\n      if (currentCharacterItem === undefined) {\n        const barCountItem = keys.reduce((acc, current) => {\n          return {\n            ...acc,\n            [current]: current === story ? 1 : 0,\n          };\n        }, {});\n        //acc.set(characterName, { [story]: 1 });\n        acc.set(characterName, barCountItem);\n      } else {\n        const storyCharacterCount = currentCharacterItem[story] || 0;\n\n        acc.set(characterName, {\n          ...currentCharacterItem,\n          [story]: storyCharacterCount + 1,\n        });\n      }\n\n      return acc;\n    }, new Map<string, BarCountItem>()),\n    ([key, value]) => ({ characterName: key, ...value })\n  );\n\n  return rankData;\n};\n\nconst useBarChartData = (\n  data: SelectedCharacterBonus[],\n  metadata: Metadata\n): BarItem[] => {\n  const [barData, setBarData] = React.useState<BarItem[]>([]);\n\n  React.useEffect(() => {\n    if (data !== undefined) {\n      const preparedData = prepare(data, metadata);\n      setBarData(preparedData);\n    }\n  }, [data, metadata]);\n\n  return barData;\n};\n\nexport default useBarChartData;\n","import { Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport React from 'react';\nimport { FilterContext } from '../context/filterContext';\nimport { MetadataContext } from '../context/metadataContext';\nimport { SelectedCharacterBonus } from '../types';\nimport AreaBumpChart from './AreaBumpChart';\nimport BarChart from './BarChart';\nimport useAreaBumpData from './hooks/useAreaBumpData';\nimport useBarChartData from './hooks/useBarChartData';\n\nconst useStyles = makeStyles({\n  graphContainer: {\n    height: '75vh',\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  graphSkeleteon: {\n    transform: 'scale(1,1)',\n    height: '90%',\n    width: '95%',\n  },\n});\n\nconst GraphCard = ({\n  data,\n  isLoading = false,\n}: {\n  data: SelectedCharacterBonus[];\n  isLoading?: boolean;\n}) => {\n  const { state: metadataContext } = React.useContext(MetadataContext);\n  const { state: filterContext } = React.useContext(FilterContext);\n  const areaBumpData = useAreaBumpData(data);\n  const barData = useBarChartData(data, metadataContext);\n  const classes = useStyles();\n\n  const showTreemap =\n    filterContext.filters.filter((f) => f.id === 'currentMonth' && f.enabled)\n      .length >= 1;\n\n  return (\n    <Paper className={classes.graphContainer}>\n      {isLoading && <Skeleton className={classes.graphSkeleteon} />}\n      {!isLoading && !showTreemap && (\n        <AreaBumpChart areaBumpData={areaBumpData} />\n      )}\n      {!isLoading && showTreemap && <BarChart data={barData} />}\n    </Paper>\n  );\n};\n\nexport default GraphCard;\n","import {\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { BonusesCount } from './types';\n\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 250,\n  },\n  tableContainer: {\n    height: '65vh',\n    width: '100%',\n  },\n});\n\nconst RankTable = ({ rankedData }: { rankedData: BonusesCount[] }) => {\n  const classes = useStyles();\n  return (\n    <TableContainer component={Paper} className={classes.tableContainer}>\n      <Table className={classes.table} stickyHeader>\n        <TableHead>\n          <TableRow>\n            <TableCell>Character</TableCell>\n            <TableCell align=\"right\"># of stages</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {rankedData.map((row) => (\n            <TableRow key={row.characterName}>\n              <TableCell component=\"th\" scope=\"row\">\n                {row.characterName}\n              </TableCell>\n              <TableCell align=\"right\">{row.count}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default RankTable;\n","import { Card, CardContent, CardHeader } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport React from 'react';\nimport { MetadataContext } from '../context/metadataContext';\nimport { SelectedCharacterBonus } from '../types';\nimport useRankTableData from './hooks/useRankTableData';\nimport RankTable from './RankTable';\n\nconst useStyles = makeStyles({\n  card: {\n    //height: '65vh',\n  },\n  cardContent: {\n    padding: 0,\n    '&:last-child': {\n      paddingBottom: 0,\n    },\n  },\n  left: {\n    float: 'left',\n  },\n  right: {\n    float: 'right',\n    marginRight: '1em',\n  },\n  contentContainer: {\n    paddingLeft: '1em',\n  },\n});\n\nconst RankTableCard = ({\n  data,\n  isLoading = false,\n}: {\n  data: SelectedCharacterBonus[];\n  isLoading?: boolean;\n}) => {\n  const { state } = React.useContext(MetadataContext);\n  const rankedData = useRankTableData(data, state);\n  const classes = useStyles();\n\n  return (\n    <>\n      <Card className={classes.card}>\n        <CardHeader\n          title={\n            isLoading ? (\n              <Skeleton\n                animation=\"wave\"\n                height={30}\n                width=\"80%\"\n                style={{ marginBottom: 6 }}\n              />\n            ) : (\n              'Story Mode Rank'\n            )\n          }\n        />\n        <CardContent className={classes.cardContent}>\n          {isLoading && (\n            <div className={classes.contentContainer}>\n              {[...Array(20)].map((_val, index) => (\n                <React.Fragment key={index}>\n                  <Skeleton\n                    animation=\"wave\"\n                    height={10}\n                    style={{ marginBottom: 6 }}\n                    width=\"50%\"\n                    className={classes.left}\n                  ></Skeleton>\n                  <Skeleton\n                    animation=\"wave\"\n                    height={10}\n                    width=\"10%\"\n                    className={classes.right}\n                  />\n                  <br />\n                </React.Fragment>\n              ))}\n            </div>\n          )}\n          {!isLoading && <RankTable rankedData={rankedData} />}\n        </CardContent>\n      </Card>\n    </>\n  );\n};\n\nexport default RankTableCard;\n","import { Grid } from '@material-ui/core';\nimport React from 'react';\nimport FilterSection from '../../components/FilterSection';\nimport GraphCard from '../../components/GraphCard';\nimport useFilteredData from '../../components/hooks/useFilteredData';\nimport RankTableCard from '../../components/RankTableCard';\nimport { FilterContext } from '../../context/filterContext';\nimport { SelectedCharacterBonus } from '../../types';\n\nconst StatsPage = ({\n  data,\n  isLoading,\n}: {\n  data: SelectedCharacterBonus[];\n  isLoading: boolean;\n}) => {\n  //Contexts\n  const { state: filterContext } = React.useContext(FilterContext);\n\n  const filteredData = useFilteredData(data, filterContext.filters);\n  return (\n    <>\n      <Grid container spacing={3}>\n        <Grid item lg={12}>\n          <FilterSection />\n        </Grid>\n        <Grid item xs={12} md={3}>\n          <RankTableCard data={filteredData} isLoading={isLoading} />\n        </Grid>\n        <Grid item xs={12} md={9}>\n          <GraphCard data={filteredData} isLoading={isLoading} />\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default StatsPage;\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport React from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport useCharacterBonus from '../components/hooks/useCharacterBonus';\nimport useCharactersMetadata from '../components/hooks/useCharactersMetadata';\nimport useFragmentMetadata from '../components/hooks/useFragmentsMetadata';\nimport useStagesMetadata from '../components/hooks/useStagesMetadata';\nimport SiteAppBar from '../components/SiteAppBar';\nimport { FilterContext } from '../context/filterContext';\nimport { MetadataContext } from '../context/metadataContext';\nimport filters, { createFragmentFilters } from '../filters';\nimport AutoplayPage from './autoplay/AutoplayPage';\nimport ManagePage from './manage/ManagePage';\nimport StatsPage from './stats/StatsPage';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n      padding: '1em',\n    },\n  })\n);\n\nconst HomePage = () => {\n  const classes = useStyles();\n  const { dispatch } = React.useContext(MetadataContext);\n  const { dispatch: filterDispatch } = React.useContext(FilterContext);\n\n  //Fetch data\n  const { data: stageMetadata, isLoading: isStageMetadataLoading } =\n    useStagesMetadata();\n  const { data: characterMetadata, isLoading: isCharacterMetadataLoading } =\n    useCharactersMetadata();\n  const { data: fragmentMetadata, isLoading: isFragmentMetadataLoading } =\n    useFragmentMetadata();\n  const { data, isLoading: isDataLoading } = useCharacterBonus();\n\n  React.useEffect(() => {\n    dispatch({ type: 'calculateLastMonth', data });\n  }, [dispatch, data]);\n\n  React.useEffect(() => {\n    if (!isStageMetadataLoading) {\n      dispatch({ type: 'setStages', stages: stageMetadata });\n    }\n\n    if (!isCharacterMetadataLoading) {\n      dispatch({ type: 'setCharacters', characters: characterMetadata });\n    }\n\n    if (!isFragmentMetadataLoading && fragmentMetadata) {\n      dispatch({ type: 'setFragments', fragments: fragmentMetadata });\n    }\n  }, [\n    dispatch,\n    characterMetadata,\n    isCharacterMetadataLoading,\n    isStageMetadataLoading,\n    isFragmentMetadataLoading,\n    stageMetadata,\n    fragmentMetadata,\n  ]);\n\n  React.useEffect(() => {\n    const fragmentFilters = createFragmentFilters(fragmentMetadata || []);\n\n    filterDispatch({\n      type: 'add',\n      filters: [...filters, ...fragmentFilters],\n    });\n  }, [filterDispatch, fragmentMetadata]);\n\n  const isLoading =\n    isStageMetadataLoading &&\n    isCharacterMetadataLoading &&\n    isFragmentMetadataLoading &&\n    isDataLoading;\n\n  return (\n    <>\n      <SiteAppBar />\n      <div className={classes.root}>\n        <Routes>\n          <Route\n            path=\"/\"\n            element={<StatsPage data={data} isLoading={isLoading} />}\n          />\n          <Route\n            path=\"/autoplay\"\n            element={<AutoplayPage data={data} isLoading={isLoading} />}\n          />\n          <Route path=\"/manage\" element={<ManagePage />} />\n        </Routes>\n      </div>\n    </>\n  );\n};\n\nexport default HomePage;\n","import { SelectedCharacterBonus, StoryFragment } from '../types';\nimport filterColourMap from './filterColours';\nimport { Filter } from './types';\n\nconst createFragmentFilters = (fragments: StoryFragment[]): Filter[] => {\n  return fragments\n    .sort((a, b) => a.id - b.id)\n    .map((f) => {\n      const colour = filterColourMap[f.story];\n      return {\n        id: `fragmentFilter${f.id}`,\n        label: `${f.story} #${f.fragment}`,\n        enabled: false,\n        canDelete: true,\n        predicate: (term: SelectedCharacterBonus, data?: any) => {\n          return f.stageIds.includes(term.stageId);\n        },\n        colour,\n      };\n    });\n};\n\nexport { createFragmentFilters };\n","import { createMuiTheme } from '@material-ui/core/styles';\nimport purple from '@material-ui/core/colors/deepPurple';\nimport green from '@material-ui/core/colors/green';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: purple[500],\n    },\n    secondary: {\n      main: green[500],\n    },\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport HomePage from './pages/HomePage';\nimport FilterProvider from './context/filterContext';\nimport MetadataProvider from './context/metadataContext';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './theme';\nimport { HashRouter } from 'react-router-dom';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\nconst App = () => {\n  return (\n    <>\n      <HashRouter>\n        <QueryClientProvider client={queryClient}>\n          <MetadataProvider>\n            <FilterProvider>\n              <ThemeProvider theme={theme}>\n                <HomePage />\n              </ThemeProvider>\n            </FilterProvider>\n          </MetadataProvider>\n        </QueryClientProvider>\n      </HashRouter>\n    </>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}