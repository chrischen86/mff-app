(this["webpackJsonpmff-app"]=this["webpackJsonpmff-app"]||[]).push([[0],{275:function(t,e,n){},412:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(66),c=n.n(i),o=(n(275),n(473)),s=n(241),d=n(470),u=n(453),l=n(475),f=n(17),h=n(21),b=n(18),j=n(3);function g(t,e){var n=r.a.createContext({state:e,dispatch:function(){return e}});return[n,function(a){var i=r.a.useReducer(t,e),c=Object(f.a)(i,2),o=c[0],s=c[1];return Object(j.jsx)(n.Provider,Object(b.a)({value:{state:o,dispatch:s}},a))}]}var m=g((function(t,e){switch(e.type){case"add":return Object(b.a)(Object(b.a)({},t),{},{filters:e.filters});case"enable":case"disable":return void 0===t.filters.find((function(t){return t.id===e.filterId}))?t:Object(b.a)(Object(b.a)({},t),{},{filters:t.filters.map((function(t){return t.id===e.filterId?Object(b.a)(Object(b.a)({},t),{},{enabled:"disable"!==e.type}):t}))});case"remove":return Object(b.a)(Object(b.a)({},t),{},{filters:Object(h.a)(t.filters.filter((function(t){return e.filters.find((function(e){return e.id===t.id}))})))});default:throw new Error("Uknown action type provided")}}),{filters:[]}),O=Object(f.a)(m,2),p=O[0],x=O[1],v=p,y=x,w=g((function(t,e){switch(e.type){case"setStages":return Object(b.a)(Object(b.a)({},t),{},{stages:e.stages});case"setCharacters":return Object(b.a)(Object(b.a)({},t),{},{characters:e.characters});case"calculateLastMonth":if(void 0===e.data)return t;var n=e.data.filter((function(t,e,n){return n.findIndex((function(e){return e.date===t.date}))===e})).map((function(t){return new Date(t.date)})).sort();return Object(b.a)(Object(b.a)({},t),{},{currentMonth:n[n.length-1].toISOString()});default:throw new Error("Uknown action type provided")}}),{stages:[],characters:[],stories:[],currentMonth:void 0}),C=Object(f.a)(w,2),k=C[0],I=C[1],M=k,D=I,S=[{id:"currentMonth",label:"Current Month",enabled:!0,canDelete:!1,predicate:function(t,e){var n=new Date(t.date),a=void 0===e.currentMonth?new Date:new Date(e.currentMonth);return n.getMonth()===a.getMonth()}},{id:"allTime",label:"All Time",enabled:!1,canDelete:!1,predicate:function(t){return!0}}],N=[{id:"dimensionalClash",label:"Dimensional Clash",enabled:!1,canDelete:!0,predicate:function(t){return t.stageId<=20}},{id:"trueShield",label:"The True SHIELD",enabled:!0,canDelete:!0,predicate:function(t){return t.stageId>=21&&t.stageId<=24}},{id:"allWar",label:"The All-War",enabled:!0,canDelete:!0,predicate:function(t){return t.stageId>=25&&t.stageId<=28}},{id:"futureEndsHere",label:"The Future Ends Here",enabled:!0,canDelete:!0,predicate:function(t){return t.stageId>=29}}],L=[].concat(Object(h.a)(S),Object(h.a)(N)),B=n(455),E=n(456),T=n(476),F=n(10),H=n(231),Y=n.n(H),P=Object(u.a)((function(t){return{toolbar:{backgroundColor:"#f5f5f5",display:"flex",flexWrap:"wrap",padding:t.spacing(.5),transition:t.transitions.create(["padding","min-height","background-color"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.short}),position:"sticky"},toolbarHidden:{backgroundColor:"inherit",padding:0,paddingLeft:t.spacing(.5),minHeight:0,transition:t.transitions.create(["padding","min-height","background-color"],{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.short})},chip:{margin:t.spacing(.5)},chipHidden:{display:"none"}}})),A=function(t){var e,n=t.visible,a=void 0!==n&&n,i=t.filters,c=void 0===i?[]:i,o=r.a.useState(a),s=Object(f.a)(o,2),d=s[0],u=s[1],l=r.a.useContext(v),h=l.state,b=l.dispatch,g=P();r.a.useEffect((function(){b({type:"add",filters:c})}),[b,c]);return!d&&h.filters.length<=0?null:Object(j.jsxs)(B.a,{className:Object(F.a)(g.toolbar,!d&&g.toolbarHidden),children:[Object(j.jsx)(E.a,{onClick:function(){return u(!d)},children:Object(j.jsx)(Y.a,{})}),null===(e=h.filters)||void 0===e?void 0:e.map((function(t){return Object(j.jsx)(T.a,{label:t.label,className:Object(F.a)(g.chip,!d&&!t.enabled&&g.chipHidden),onDelete:!d&&t.canDelete?function(){return e=t.id,void b({type:"disable",filterId:e});var e}:void 0,onClick:d?function(){return function(t){S.find((function(e){return e.id===t.id}))&&S.filter((function(e){return e.id!==t.id})).forEach((function(e){b({type:t.enabled?"enable":"disable",filterId:e.id})})),b({type:t.enabled?"disable":"enable",filterId:t.id})}(t)}:void 0,color:t.enabled?"primary":void 0,size:d?"medium":"small"},t.id)}))]})},R=n(260),z=n(459),W=n(245),G=n(181),J=n.n(G),U=function(t){var e=t.areaBumpData;return Object(j.jsx)(W.a,{data:e,margin:{top:40,right:100,bottom:40,left:100},spacing:8,colors:{scheme:"nivo"},blendMode:"multiply",startLabel:"id",axisTop:{tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendPosition:"middle",legendOffset:-36,format:function(t){return J()(t).format("MMM YYYY")}},axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendPosition:"middle",legendOffset:32,format:function(t){return J()(t).format("MMM YYYY")}}})},_=function(t){return void 0===t?[]:function(t){return Array.from(t.reduce((function(t,e){var n=t.get(e.characterId);if(void 0===n)t.set(e.characterId,[{x:e.date,y:1}]);else{var a=n.filter((function(t){return t.x===e.date}));0===a.length?t.set(e.characterId,[].concat(Object(h.a)(n.filter((function(t){return t.x!==e.date}))),[{x:e.date,y:1}])):1===a.length&&t.set(e.characterId,[].concat(Object(h.a)(n.filter((function(t){return t.x!==e.date}))),[{x:e.date,y:a[0].y+1}]))}return t}),new Map),(function(t){var e=Object(f.a)(t,2);return{id:e[0],data:e[1]}}))}(t)},q=function(t,e){return void 0===t?{name:"No Data"}:function(t,e){var n=Array.from(t.reduce((function(t,n){var a,r,i=(null===(a=e.stages.find((function(t){return t.id===n.stageId})))||void 0===a?void 0:a.story)||"Stage ".concat(n.stageId),c=t.get(i),o=(null===(r=e.characters.find((function(t){return t.id===n.characterId})))||void 0===r?void 0:r.name)||n.characterId;if(void 0===c)t.set(i,[{name:o,loc:1}]);else{var s,d,u=null!==(s=c.find((function(t){return t.name===o})))&&void 0!==s?s:{name:o,loc:0};t.set(i,[Object(b.a)(Object(b.a)({},u),{},{loc:(null!==(d=u.loc)&&void 0!==d?d:0)+1})].concat(Object(h.a)(c.filter((function(t){return t.name!==o})))))}return t}),new Map),(function(t){var e=Object(f.a)(t,2);return{name:e[0],children:e[1]}}));return{name:"Character Bonus By Story",children:Object(h.a)(n)}}(t,e)},K=n(237),Q=r.a.memo((function(t){var e=t.data;return Object(j.jsx)(K.a,{data:e,identity:"name",value:"loc",margin:{top:10,right:10,bottom:10,left:10},label:"id",labelSkipSize:50,labelTextColor:"black"})})),V=Object(u.a)({graphContainer:{height:"65vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},graphSkeleteon:{transform:"scale(1,1)",height:"90%",width:"95%"}}),X=function(t){var e=t.data,n=t.isLoading,a=void 0!==n&&n,i=r.a.useContext(M).state,c=r.a.useContext(v).state,o=_(e),s=q(e,i),d=V(),u=c.filters.filter((function(t){return"currentMonth"===t.id&&t.enabled})).length>=1;return Object(j.jsxs)(R.a,{className:d.graphContainer,children:[a&&Object(j.jsx)(z.a,{className:d.graphSkeleteon}),!a&&!u&&Object(j.jsx)(U,{areaBumpData:o}),!a&&u&&Object(j.jsx)(Q,{data:s})]})},Z=n(27),$=n.n(Z),tt=n(68),et=n(474),nt=function(){return Object(et.a)("characterBonus",Object(tt.a)($.a.mark((function t(){var e;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://chrischen86.github.io/mff-data/selectedcharacterbonus.json");case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)}))))},at=function(){return Object(et.a)("characters",Object(tt.a)($.a.mark((function t(){var e;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://chrischen86.github.io/mff-data/characters.json");case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)}))))},rt=[S,N],it=function(t,e){var n=r.a.useContext(M).state;return void 0===t?[]:void 0===e||e.length<=0?t:function(t,e,n){var a=e.filter((function(t){return t.enabled}));return t.filter((function(t){return rt.every((function(e){return e.filter((function(t){return null===a||void 0===a?void 0:a.find((function(e){return e.id===t.id}))})).some((function(e){return e.predicate(t,n)}))}))}))}(t,e,n)},ct=function(){return Object(et.a)("stages",Object(tt.a)($.a.mark((function t(){var e;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://chrischen86.github.io/mff-data/stages.json");case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)}))))},ot=n(466),st=n(467),dt=n(468),ut=function(t,e){return void 0===t?[]:function(t,e){return Array.from(t.reduce((function(t,e){var n=t.get(e.characterId);return t.set(e.characterId,n?n+1:1),t}),new Map),(function(t){var n,a=Object(f.a)(t,2),r=a[0],i=a[1];return{characterName:(null===e||void 0===e||null===(n=e.characters.find((function(t){return t.id===r})))||void 0===n?void 0:n.name)||r,count:i}})).sort((function(t,e){return e.count-t.count}))}(t,e)},lt=n(460),ft=n(461),ht=n(462),bt=n(463),jt=n(464),gt=n(465),mt=Object(u.a)({table:{minWidth:250},tableContainer:{height:"65vh",width:"100%"}}),Ot=function(t){var e=t.rankedData,n=mt();return Object(j.jsx)(lt.a,{component:R.a,className:n.tableContainer,children:Object(j.jsxs)(ft.a,{className:n.table,stickyHeader:!0,children:[Object(j.jsx)(ht.a,{children:Object(j.jsxs)(bt.a,{children:[Object(j.jsx)(jt.a,{children:"Character"}),Object(j.jsx)(jt.a,{align:"right",children:"# of stages"})]})}),Object(j.jsx)(gt.a,{children:e.map((function(t){return Object(j.jsxs)(bt.a,{children:[Object(j.jsx)(jt.a,{component:"th",scope:"row",children:t.characterName}),Object(j.jsx)(jt.a,{align:"right",children:t.count})]},t.characterName)}))})]})})},pt=Object(u.a)({card:{height:"65vh"},cardContent:{padding:0,"&:last-child":{paddingBottom:0}},left:{float:"left"},right:{float:"right",marginRight:"1em"},contentContainer:{paddingLeft:"1em"}}),xt=function(t){var e=t.data,n=t.isLoading,a=void 0!==n&&n,i=r.a.useContext(M).state,c=ut(e,i),o=pt();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(ot.a,{className:o.card,children:[Object(j.jsx)(st.a,{title:a?Object(j.jsx)(z.a,{animation:"wave",height:30,width:"80%",style:{marginBottom:6}}):"Story Mode Rank"}),Object(j.jsxs)(dt.a,{className:o.cardContent,children:[a&&Object(j.jsx)("div",{className:o.contentContainer,children:Object(h.a)(Array(20)).map((function(t,e){return Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)(z.a,{animation:"wave",height:10,style:{marginBottom:6},width:"50%",className:o.left}),Object(j.jsx)(z.a,{animation:"wave",height:10,width:"10%",className:o.right}),Object(j.jsx)("br",{})]},e)}))}),!a&&Object(j.jsx)(Ot,{rankedData:c})]})]})})},vt=n(469),yt=n(144),wt=n(242),Ct=n.n(wt),kt=Object(u.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}})),It=function(){var t=kt();return Object(j.jsx)(vt.a,{position:"static",children:Object(j.jsxs)(B.a,{children:[Object(j.jsx)(yt.a,{variant:"h6",className:t.title}),Object(j.jsx)(E.a,{color:"inherit",target:"_blank",href:"https://github.com/chrischen86/mff-app",children:Object(j.jsx)(Ct.a,{})})]})})},Mt=Object(u.a)((function(t){return Object(l.a)({root:{flexGrow:1,padding:"1em"}})})),Dt=function(){var t=r.a.useContext(M).dispatch,e=r.a.useContext(v).state,n=ct(),a=n.data,i=n.isLoading,c=at(),o=c.data,s=c.isLoading,u=nt(),l=u.data,f=u.isLoading,h=it(l,e.filters),b=Mt();r.a.useEffect((function(){t({type:"calculateLastMonth",data:l})}),[t,l]),r.a.useEffect((function(){i||t({type:"setStages",stages:a}),s||t({type:"setCharacters",characters:o})}),[t,o,s,i,a]);var g=i&&s&&f;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(It,{}),Object(j.jsx)("div",{className:b.root,children:Object(j.jsxs)(d.a,{container:!0,spacing:3,children:[Object(j.jsx)(d.a,{item:!0,lg:12,children:Object(j.jsx)(A,{filters:L})}),Object(j.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(xt,{data:h,isLoading:g})}),Object(j.jsx)(d.a,{item:!0,xs:12,md:9,children:Object(j.jsx)(X,{data:h,isLoading:g})})]})})]})},St=n(471),Nt=n(246),Lt=n(243),Bt=n.n(Lt),Et=n(244),Tt=n.n(Et),Ft=Object(Nt.a)({palette:{primary:{main:Bt.a[500]},secondary:{main:Tt.a[500]}}}),Ht=new o.a,Yt=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(s.a,{client:Ht,children:Object(j.jsx)(D,{children:Object(j.jsx)(y,{children:Object(j.jsx)(St.a,{theme:Ft,children:Object(j.jsx)(Dt,{})})})})})})},Pt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,477)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),a(t),r(t),i(t),c(t)}))};c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(Yt,{})}),document.getElementById("root")),Pt()}},[[412,1,2]]]);
//# sourceMappingURL=main.cbcde16d.chunk.js.map